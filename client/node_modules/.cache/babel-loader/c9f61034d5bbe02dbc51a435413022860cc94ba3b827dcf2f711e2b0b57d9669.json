{"ast":null,"code":"import React from'react';import{Link as RouterLink}from'react-router-dom';import{Card,CardActionArea,CardActions,CardContent,CardMedia,Button,Typography,Box,Rating,Chip}from'@mui/material';import{ShoppingCart as ShoppingCartIcon}from'@mui/icons-material';import{useCart}from'../../hooks/useCart';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductCard=_ref=>{let{product}=_ref;const{addToCart}=useCart();const handleAddToCart=e=>{e.preventDefault();e.stopPropagation();addToCart({id:product._id,name:product.name,price:product.price,imageUrl:product.images[0]||'/placeholder.jpg'});};const isNew=()=>{const productDate=new Date(product.createdAt);const thirtyDaysAgo=new Date();thirtyDaysAgo.setDate(thirtyDaysAgo.getDate()-30);return productDate>=thirtyDaysAgo;};return/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column',transition:'transform 0.3s, box-shadow 0.3s','&:hover':{transform:'translateY(-5px)',boxShadow:'0 8px 16px rgba(0, 0, 0, 0.1)'}},children:[/*#__PURE__*/_jsxs(CardActionArea,{component:RouterLink,to:`/product/${product._id}`,sx:{flexGrow:1,display:'flex',flexDirection:'column',alignItems:'stretch'},children:[/*#__PURE__*/_jsxs(Box,{sx:{position:'relative'},children:[/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"200\",image:product.images[0]||'/placeholder.jpg',alt:product.name,sx:{objectFit:'contain',bgcolor:'#f5f5f5',p:2}}),isNew()&&/*#__PURE__*/_jsx(Chip,{label:\"\\u041D\\u043E\\u0432\\u0438\\u043D\\u043A\\u0430\",color:\"secondary\",size:\"small\",sx:{position:'absolute',top:8,right:8,fontWeight:'bold'}}),product.stock<=0&&/*#__PURE__*/_jsx(Chip,{label:\"\\u041D\\u0435\\u0442 \\u0432 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438\",color:\"error\",size:\"small\",sx:{position:'absolute',top:8,right:isNew()?88:8,fontWeight:'bold'}})]}),/*#__PURE__*/_jsxs(CardContent,{sx:{flexGrow:1,display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",component:\"div\",noWrap:true,children:product.name}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(Rating,{value:product.rating,precision:0.5,size:\"small\",readOnly:true}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{ml:1},children:[\"(\",product.reviews.length,\")\"]})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:1},children:[\"\\u041C\\u043E\\u0449\\u043D\\u043E\\u0441\\u0442\\u044C: \",product.power,\" \\u043B.\\u0441.\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:1},children:[\"\\u041F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C: \",product.manufacturer]}),/*#__PURE__*/_jsx(Box,{sx:{mt:'auto'},children:/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",color:\"primary.main\",fontWeight:\"bold\",children:[product.price.toLocaleString(),\" \\u20BD\"]})})]})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"contained\",startIcon:/*#__PURE__*/_jsx(ShoppingCartIcon,{}),onClick:handleAddToCart,fullWidth:true,disabled:product.stock<=0,sx:{bgcolor:'secondary.main','&:hover':{bgcolor:'secondary.dark'}},children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})})]});};export default ProductCard;","map":{"version":3,"names":["React","Link","RouterLink","Card","CardActionArea","CardActions","CardContent","CardMedia","Button","Typography","Box","Rating","Chip","ShoppingCart","ShoppingCartIcon","useCart","jsx","_jsx","jsxs","_jsxs","ProductCard","_ref","product","addToCart","handleAddToCart","e","preventDefault","stopPropagation","id","_id","name","price","imageUrl","images","isNew","productDate","Date","createdAt","thirtyDaysAgo","setDate","getDate","sx","height","display","flexDirection","transition","transform","boxShadow","children","component","to","flexGrow","alignItems","position","image","alt","objectFit","bgcolor","p","label","color","size","top","right","fontWeight","stock","gutterBottom","variant","noWrap","mb","value","rating","precision","readOnly","ml","reviews","length","power","manufacturer","mt","toLocaleString","startIcon","onClick","fullWidth","disabled"],"sources":["C:/Users/Данил Тимеев/Documents/GitHub/DVIG/client/src/components/products/ProductCard.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport {\r\n  Card,\r\n  CardActionArea,\r\n  CardActions,\r\n  CardContent,\r\n  CardMedia,\r\n  Button,\r\n  Typography,\r\n  Box,\r\n  Rating,\r\n  Chip,\r\n} from '@mui/material';\r\nimport { ShoppingCart as ShoppingCartIcon } from '@mui/icons-material';\r\nimport { useCart } from '../../hooks/useCart';\r\nimport { Motor } from '../../services/api';\r\n\r\ninterface ProductCardProps {\r\n  product: Motor;\r\n}\r\n\r\nconst ProductCard: React.FC<ProductCardProps> = ({ product }) => {\r\n  const { addToCart } = useCart();\r\n\r\n  const handleAddToCart = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    addToCart({\r\n      id: product._id,\r\n      name: product.name,\r\n      price: product.price,\r\n      imageUrl: product.images[0] || '/placeholder.jpg',\r\n    });\r\n  };\r\n\r\n  const isNew = () => {\r\n    const productDate = new Date(product.createdAt);\r\n    const thirtyDaysAgo = new Date();\r\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n    return productDate >= thirtyDaysAgo;\r\n  };\r\n\r\n  return (\r\n    <Card\r\n      sx={{\r\n        height: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        transition: 'transform 0.3s, box-shadow 0.3s',\r\n        '&:hover': {\r\n          transform: 'translateY(-5px)',\r\n          boxShadow: '0 8px 16px rgba(0, 0, 0, 0.1)',\r\n        },\r\n      }}\r\n    >\r\n      <CardActionArea\r\n        component={RouterLink}\r\n        to={`/product/${product._id}`}\r\n        sx={{ flexGrow: 1, display: 'flex', flexDirection: 'column', alignItems: 'stretch' }}\r\n      >\r\n        <Box sx={{ position: 'relative' }}>\r\n          <CardMedia\r\n            component=\"img\"\r\n            height=\"200\"\r\n            image={product.images[0] || '/placeholder.jpg'}\r\n            alt={product.name}\r\n            sx={{ objectFit: 'contain', bgcolor: '#f5f5f5', p: 2 }}\r\n          />\r\n          {isNew() && (\r\n            <Chip\r\n              label=\"Новинка\"\r\n              color=\"secondary\"\r\n              size=\"small\"\r\n              sx={{\r\n                position: 'absolute',\r\n                top: 8,\r\n                right: 8,\r\n                fontWeight: 'bold',\r\n              }}\r\n            />\r\n          )}\r\n          {product.stock <= 0 && (\r\n            <Chip\r\n              label=\"Нет в наличии\"\r\n              color=\"error\"\r\n              size=\"small\"\r\n              sx={{\r\n                position: 'absolute',\r\n                top: 8,\r\n                right: isNew() ? 88 : 8,\r\n                fontWeight: 'bold',\r\n              }}\r\n            />\r\n          )}\r\n        </Box>\r\n\r\n        <CardContent sx={{ flexGrow: 1, display: 'flex', flexDirection: 'column' }}>\r\n          <Typography gutterBottom variant=\"h6\" component=\"div\" noWrap>\r\n            {product.name}\r\n          </Typography>\r\n          \r\n          <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\r\n            <Rating value={product.rating} precision={0.5} size=\"small\" readOnly />\r\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 1 }}>\r\n              ({product.reviews.length})\r\n            </Typography>\r\n          </Box>\r\n          \r\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1 }}>\r\n            Мощность: {product.power} л.с.\r\n          </Typography>\r\n          \r\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1 }}>\r\n            Производитель: {product.manufacturer}\r\n          </Typography>\r\n          \r\n          <Box sx={{ mt: 'auto' }}>\r\n            <Typography variant=\"h6\" color=\"primary.main\" fontWeight=\"bold\">\r\n              {product.price.toLocaleString()} ₽\r\n            </Typography>\r\n          </Box>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      \r\n      <CardActions>\r\n        <Button\r\n          size=\"small\"\r\n          variant=\"contained\"\r\n          startIcon={<ShoppingCartIcon />}\r\n          onClick={handleAddToCart}\r\n          fullWidth\r\n          disabled={product.stock <= 0}\r\n          sx={{\r\n            bgcolor: 'secondary.main',\r\n            '&:hover': {\r\n              bgcolor: 'secondary.dark',\r\n            },\r\n          }}\r\n        >\r\n          В корзину\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ProductCard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}