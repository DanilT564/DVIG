{"ast":null,"code":"import React from'react';import{Routes,Route,Navigate}from'react-router-dom';import{Box}from'@mui/material';import{useAuth}from'./hooks/useAuth';// Layouts\nimport MainLayout from'./components/layouts/MainLayout';import AdminLayout from'./components/layouts/AdminLayout';// Pages\nimport HomePage from'./pages/HomePage';import CatalogPage from'./pages/CatalogPage';import ProductPage from'./pages/ProductPage';import CartPage from'./pages/CartPage';import CheckoutPage from'./pages/CheckoutPage';import LoginPage from'./pages/LoginPage';import RegisterPage from'./pages/RegisterPage';import ProfilePage from'./pages/ProfilePage';import OrdersPage from'./pages/OrdersPage';// Admin Pages\nimport AdminDashboard from'./pages/admin/AdminDashboard';import AdminProducts from'./pages/admin/AdminProducts';import AdminOrders from'./pages/admin/AdminOrders';import AdminUsers from'./pages/admin/AdminUsers';// Компонент для защищенных маршрутов\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{element,adminRequired=false}=_ref;const{isAuthenticated,isAdmin,loading}=useAuth();if(loading){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',mt:4},children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}if(adminRequired&&!isAdmin){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsx(_Fragment,{children:element});};const App=()=>{return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(MainLayout,{}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"catalog\",element:/*#__PURE__*/_jsx(CatalogPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"product/:id\",element:/*#__PURE__*/_jsx(ProductPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"cart\",element:/*#__PURE__*/_jsx(CartPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"login\",element:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"register\",element:/*#__PURE__*/_jsx(RegisterPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"checkout\",element:/*#__PURE__*/_jsx(ProtectedRoute,{element:/*#__PURE__*/_jsx(CheckoutPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"profile\",element:/*#__PURE__*/_jsx(ProtectedRoute,{element:/*#__PURE__*/_jsx(ProfilePage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"orders\",element:/*#__PURE__*/_jsx(ProtectedRoute,{element:/*#__PURE__*/_jsx(OrdersPage,{})})})]}),/*#__PURE__*/_jsxs(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(ProtectedRoute,{element:/*#__PURE__*/_jsx(AdminLayout,{}),adminRequired:true}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(AdminDashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"products\",element:/*#__PURE__*/_jsx(AdminProducts,{})}),/*#__PURE__*/_jsx(Route,{path:\"orders\",element:/*#__PURE__*/_jsx(AdminOrders,{})}),/*#__PURE__*/_jsx(Route,{path:\"users\",element:/*#__PURE__*/_jsx(AdminUsers,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})})]});};export default App;","map":{"version":3,"names":["React","Routes","Route","Navigate","Box","useAuth","MainLayout","AdminLayout","HomePage","CatalogPage","ProductPage","CartPage","CheckoutPage","LoginPage","RegisterPage","ProfilePage","OrdersPage","AdminDashboard","AdminProducts","AdminOrders","AdminUsers","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ProtectedRoute","_ref","element","adminRequired","isAuthenticated","isAdmin","loading","sx","display","justifyContent","mt","children","to","App","path","index","replace"],"sources":["C:/Users/Данил Тимеев/Documents/GitHub/DVIG/client/src/App.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Routes, Route, Navigate } from 'react-router-dom';\r\nimport { Container, Box } from '@mui/material';\r\nimport { useAuth } from './hooks/useAuth';\r\n\r\n// Layouts\r\nimport MainLayout from './components/layouts/MainLayout';\r\nimport AdminLayout from './components/layouts/AdminLayout';\r\n\r\n// Pages\r\nimport HomePage from './pages/HomePage';\r\nimport CatalogPage from './pages/CatalogPage';\r\nimport ProductPage from './pages/ProductPage';\r\nimport CartPage from './pages/CartPage';\r\nimport CheckoutPage from './pages/CheckoutPage';\r\nimport LoginPage from './pages/LoginPage';\r\nimport RegisterPage from './pages/RegisterPage';\r\nimport ProfilePage from './pages/ProfilePage';\r\nimport OrdersPage from './pages/OrdersPage';\r\n\r\n// Admin Pages\r\nimport AdminDashboard from './pages/admin/AdminDashboard';\r\nimport AdminProducts from './pages/admin/AdminProducts';\r\nimport AdminOrders from './pages/admin/AdminOrders';\r\nimport AdminUsers from './pages/admin/AdminUsers';\r\n\r\n// Компонент для защищенных маршрутов\r\ninterface ProtectedRouteProps {\r\n  element: React.ReactNode;\r\n  adminRequired?: boolean;\r\n}\r\n\r\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ element, adminRequired = false }) => {\r\n  const { isAuthenticated, isAdmin, loading } = useAuth();\r\n\r\n  if (loading) {\r\n    return <Box sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>Загрузка...</Box>;\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/login\" />;\r\n  }\r\n\r\n  if (adminRequired && !isAdmin) {\r\n    return <Navigate to=\"/\" />;\r\n  }\r\n\r\n  return <>{element}</>;\r\n};\r\n\r\nconst App: React.FC = () => {\r\n  return (\r\n    <Routes>\r\n      {/* Публичные маршруты */}\r\n      <Route path=\"/\" element={<MainLayout />}>\r\n        <Route index element={<HomePage />} />\r\n        <Route path=\"catalog\" element={<CatalogPage />} />\r\n        <Route path=\"product/:id\" element={<ProductPage />} />\r\n        <Route path=\"cart\" element={<CartPage />} />\r\n        <Route path=\"login\" element={<LoginPage />} />\r\n        <Route path=\"register\" element={<RegisterPage />} />\r\n        \r\n        {/* Защищенные маршруты для пользователей */}\r\n        <Route path=\"checkout\" element={<ProtectedRoute element={<CheckoutPage />} />} />\r\n        <Route path=\"profile\" element={<ProtectedRoute element={<ProfilePage />} />} />\r\n        <Route path=\"orders\" element={<ProtectedRoute element={<OrdersPage />} />} />\r\n      </Route>\r\n      \r\n      {/* Маршруты администратора */}\r\n      <Route path=\"/admin\" element={<ProtectedRoute element={<AdminLayout />} adminRequired={true} />}>\r\n        <Route index element={<AdminDashboard />} />\r\n        <Route path=\"products\" element={<AdminProducts />} />\r\n        <Route path=\"orders\" element={<AdminOrders />} />\r\n        <Route path=\"users\" element={<AdminUsers />} />\r\n      </Route>\r\n      \r\n      {/* Страница не найдена */}\r\n      <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\r\n    </Routes>\r\n  );\r\n};\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}